1 -> 
CREATE VIEW tit_reagge AS
    SELECT TITULO.TITULO FROM TITULO
    INNER JOIN GENERO ON GENERO.ID_GENERO=TITULO.ID_GENERO
    WHERE GENERO.NOME = 'Reagge'

INSERT INTO TITULO VALUES  (50, 'AAAAAAAAAAAAA', 10, to_date('10-01-2010', 'dd-mm-yyyy'), 2, 4, 5, 3);


SELECT * FROM tit_reagge

2 ->

ALTER TABLE TITULO
    ADD VAL_COMERCIAL NUMBER(3,0);
a)
UPDATE TITULO
SET VAL_COMERCIAL = PRECO;

b) 
CREATE OR REPLACE PROCEDURE UPDATE_VAL (ANO NUMBER, PERC NUMBER) 

IS
MEDIA NUMBER;

CURSOR C1 IS
SELECT MEDIAN(PRECO) AS MEDIA FROM TITULO
WHERE EXTRACT(YEAR FROM DTA_COMPRA) = ANO;

BEGIN

OPEN C1;
FETCH C1 INTO MEDIA;

UPDATE TITULO
SET VAL_COMERCIAL = MEDIA * (1+(0.01*PERC));

END UPDATE_VAL;

----

CREATE OR REPLACE PROCEDURE UPDATE_VAL (ANO NUMBER, PERC NUMBER) 

IS

BEGIN

UPDATE TITULO
SET VAL_COMERCIAL = (SELECT MEDIAN(PRECO) FROM TITULO WHERE EXTRACT(YEAR FROM DTA_COMPRA) = ANO) * (1+PERC)
WHERE EXTRACT(YEAR FROM DTA_COMPRA) = ANO;

END UPDATE_VAL;

CALL UPDATE_VAL(2010,0.2)

SELECT * FROM TITULO

d)

SELECT TITULO,PRECO,VAL_COMERCIAL,VAL_COMERCIAL-PRECO AS DIFERENÇA FROM TITULO
WHERE VAL_COMERCIAL - PRECO > 0


3 ->

CREATE OR REPLACE FUNCTION DA_PRECO (ID_TIT NUMBER)
RETURN NUMBER AS PREC NUMBER;

BEGIN 
    SELECT PRECO INTO PREC FROM TITULO
    WHERE ID_TITULO = ID_TIT AND PRECO = 10;

RETURN PREC;

END ;

A)
SELECT ID_TITULO, TITULO, PRECO FROM TITULO
WHERE DA_PRECO(ID_TITULO) = 10;

